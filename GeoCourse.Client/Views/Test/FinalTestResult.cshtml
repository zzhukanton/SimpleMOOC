
@{
	ViewBag.Title = "FinalTestResult";
}

<h2>Финальный тест по курсу <u>@Html.ActionLink(ViewBag.CourseTitle as string, "Course", "Course", new { id = (int)ViewBag.CourseId }, new { })</u> завершен.</h2>
<h3>Результат финального теста: <span style="color: chocolate"> @ViewBag.Correct </span>/ @ViewBag.All (<span style="color: chocolate">@(Math.Round((double)ViewBag.Correct / ViewBag.All * 100, 2))%</span>)</h3>

<h3>Общая статистика по курсу:</h3>

<div class="row">
	<div class="col-md-6">
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<td><b>Раздел</b></td>
					<td><b>Баллы</b></td>
					<td><b>Процент</b></td>
				</tr>
			</thead>
			<tbody>
				@for (int i = 0; i < ViewBag.Tests.Count; i++)
				{
					<tr>
						<td>@ViewBag.Tests[i].Chapter</td>
						<td>@ViewBag.TestResults[i].PointCount / 7 </td>
						<td>@(Math.Round((double)ViewBag.TestResults[i].PointCount / 7 * 100, 2))%</td>
					</tr>
				}
				<tr><td><b>Финальный тест</b></td><td><b>@ViewBag.Correct/@ViewBag.All</b></td><td><b>@(Math.Round((double)ViewBag.Correct / ViewBag.All * 100, 2))%</b></td></tr>
			</tbody>
		</table>
	</div>
</div>

<h2>Итоговая оценка курса: <span style="color: chocolate"> @(Math.Round((double)ViewBag.FinalPercentage, 2)) % </span></h2>
<small>Итоговая оценка рассчитывается по формуле <code>M = A * 0.4 + B * 0.6</code>, где <code>A</code> - процент прохождения тестов по разделам, <code>B</code> - процент прохождения финального теста.</small>

@if (ViewBag.FinalPercentage > ViewBag.CourseRequiredPercentage)
{
	<div class="successful" style="margin-top: 20px">
		<p class="text-success">Поздравляем, вы прошли данный курс!</p>
	</div>
	
}
else
{
	<div class="failed" style="margin-top: 20px">
		<p>К сожалению, вашей оценки недостаточно, чтобы засчитать данный курс.</p>
	</div>
}

<u>@Html.ActionLink("Вернуться на главную", "Index", "Home", new { }, new { @class = "btn btn-default" })</u>

